import{w as v,u as W,a4 as u,a0 as b,p as s,r as z,j as e,B as t,T as o,a7 as y,I as f,a5 as M,a6 as V,c as p,W as A,aa as G,x as N}from"./index-BJkBHIXD.js";import"./empty-content-Cck_Y1yy.js";import{a as R}from"./index.esm-DG78EUPk.js";import{a as U}from"./zod-DbnPk1Kl.js";import{u as _,a as q}from"./payment-page-DaxkDTYK.js";import{F as P}from"./fields-wQ2IQIfM.js";import{s as O}from"./schema-utils-C_-d4BNQ.js";import{F as $}from"./form-provider-BYLnCB41.js";import{S as r}from"./Stack-DSqJGNfN.js";import{C as j}from"./Card-CU8jzKuK.js";import{C as J}from"./CardHeader-BmHD0Q2N.js";import{o as K,s as Q}from"./schemas-BaSQ7w8v.js";import"./text-transform-DM798QSo.js";import"./TextField-BfOXJaKd.js";import"./Select-CM-FquqI.js";import"./index-BdCJuPE0.js";import"./rhf-phone-input-DvY4aKGv.js";import"./index-CDpvdXdB.js";import"./search-not-found-BYtFGFNz.js";import"./InputAdornment-Cyf39fZQ.js";import"./rhf-text-field-D45rQogC.js";import"./RadioGroup-eX8WPtuC.js";import"./FormControlLabel-Do9AncA_.js";import"./Autocomplete-vOabT0lM.js";import"./Chip-Cd7PxQUv.js";import"./rhf-select-BCHEEYe2.js";import"./styles-B-zEs6qR.js";import"./format-number-BErDzwe7.js";import"./upload-default-BMHhCMpu.js";import"./tslib.es6-CTYbIaVE.js";import"./DatePicker-D3hVcc_W.js";const X=a=>K({title:Q().min(5,{message:a("dashboard.paymentPage.errors.titleMinLength")}),content:O.editor().min(20,{message:a("dashboard.paymentPage.errors.contentMinLength")})});function Y(){const{t:a}=v("navbar"),n=W(),{data:i,isLoading:C}=_(),w=q(),I=X(a),d=u(),m=u(!0),E={title:"",content:""},h=R({mode:"all",resolver:U(I),defaultValues:E,values:i?{title:i.title,content:i.content}:void 0}),{watch:F,handleSubmit:S,formState:{isSubmitting:H,isValid:x}}=h,g=F(),k=S(async l=>{try{await w.mutateAsync(l),b.success(a("dashboard.paymentPage.toast.updatedSuccessfully")),n.push(s.dashboard.paymentPage.root)}catch(c){console.error(c),b.error(a("dashboard.paymentPage.toast.updateFailed"))}}),B=z.useCallback(()=>{n.push(s.dashboard.paymentPage.root)},[n]),T=(l,c)=>e.jsx(y,{onClick:c,children:e.jsx(f,{icon:l?"eva:arrow-ios-downward-fill":"eva:arrow-ios-forward-fill"})}),D=()=>e.jsxs(j,{children:[e.jsx(J,{title:a("dashboard.paymentPage.form.title"),subheader:a("dashboard.paymentPage.form.subheader"),action:T(m.value,m.onToggle),sx:{mb:3}}),e.jsxs(M,{in:m.value,children:[e.jsx(V,{}),e.jsxs(r,{spacing:3,sx:{p:3},children:[e.jsx(P.Text,{name:"title",label:a("dashboard.paymentPage.form.titleLabel")}),e.jsxs(r,{spacing:1.5,children:[e.jsx(o,{variant:"subtitle2",children:a("dashboard.paymentPage.form.content")}),e.jsx(P.Editor,{name:"content",fullItem:!0,sx:{maxHeight:600,"& .ql-editor":{minHeight:400}}}),e.jsx(o,{variant:"caption",color:"text.secondary",sx:{mt:1},children:a("dashboard.paymentPage.form.tip")})]})]})]})]}),L=()=>e.jsxs(t,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"flex-end",gap:2,p:2.5},children:[e.jsx(p,{color:"inherit",variant:"outlined",size:"medium",onClick:d.onTrue,disabled:!x,children:a("dashboard.paymentPage.actions.preview")}),e.jsx(p,{color:"inherit",variant:"outlined",size:"medium",onClick:B,children:a("dashboard.paymentPage.actions.cancel")}),e.jsx(p,{type:"submit",variant:"contained",size:"medium",loading:H,disabled:!x,children:a("dashboard.paymentPage.actions.saveChanges")})]});return C?e.jsx(t,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400},children:e.jsx(o,{children:a("dashboard.paymentPage.loading")})}):e.jsxs($,{methods:h,onSubmit:k,children:[e.jsxs(r,{spacing:5,sx:{mx:"auto",maxWidth:{xs:720,xl:880}},children:[D(),L()]}),d.value&&e.jsx(t,{sx:{position:"fixed",top:0,left:0,right:0,bottom:0,bgcolor:"rgba(0, 0, 0, 0.5)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",p:2},children:e.jsxs(j,{sx:{maxWidth:"90vw",maxHeight:"90vh",overflow:"auto",position:"relative"},children:[e.jsx(t,{sx:{p:2,borderBottom:1,borderColor:"divider"},children:e.jsxs(r,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(o,{variant:"h6",children:a("dashboard.paymentPage.actions.preview")}),e.jsx(y,{onClick:d.onFalse,children:e.jsx(f,{icon:"solar:close-circle-bold"})})]})}),e.jsxs(t,{sx:{p:3},children:[e.jsx(o,{variant:"h4",sx:{mb:2},children:g.title}),e.jsx(t,{sx:{"& h1, & h2, & h3, & h4, & h5, & h6":{color:"text.primary",fontWeight:600,mb:2,mt:3,"&:first-of-type":{mt:0}},"& p":{color:"text.secondary",lineHeight:1.7,mb:2},"& ul, & ol":{pl:3,mb:2,"& li":{color:"text.secondary",lineHeight:1.7,mb:.5}}},dangerouslySetInnerHTML:{__html:g.content}})]})]})})]})}function Z(){const{t:a}=v("navbar");return e.jsxs(A,{children:[e.jsx(G,{heading:a("dashboard.paymentPage.editPaymentPage"),backHref:s.dashboard.paymentPage.root,links:[{name:"Dashboard",href:s.dashboard.root},{name:a("sidebar.pages"),href:s.dashboard.user.root},{name:a("dashboard.paymentPage.heading"),href:s.dashboard.paymentPage.root},{name:a("dashboard.paymentPage.edit")}],sx:{mb:{xs:3,md:5}}}),e.jsx(Y,{})]})}const ee={title:`Edit Payment Page | Dashboard - ${N.appName}`};function Te(){return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:ee.title}),e.jsx(Z,{})]})}export{Te as default};
