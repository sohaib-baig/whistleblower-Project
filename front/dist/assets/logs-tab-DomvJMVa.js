import{w as L,r as t,j as e,B as x,b as v,T as b,I as S,ab as E,ac as I}from"./index-BJkBHIXD.js";import"./empty-content-Cck_Y1yy.js";import{T as _}from"./table-head-custom-C2dATJUG.js";import{T as R}from"./table-pagination-custom-Dom7EZhX.js";import{C as p}from"./Card-CU8jzKuK.js";import{S as A}from"./Stack-DSqJGNfN.js";import{T as B}from"./TextField-BfOXJaKd.js";import{I as H}from"./InputAdornment-Cyf39fZQ.js";import{T as D}from"./TableContainer-D0zNvGRU.js";import{b as F,c as V,T as f,a as n}from"./TableHead-D9jAElFw.js";function Q({caseId:i}){const{t:s}=L("navbar"),[h,g]=t.useState([]),[T,m]=t.useState(!0),[c,j]=t.useState(""),[l,u]=t.useState(0),[r,C]=t.useState(5),P=[{id:"actionPerformed",label:s("dashboard.case.logsTab.actionPerformed")},{id:"actionValue",label:s("dashboard.case.logsTab.actionValue")},{id:"dateTime",label:s("dashboard.case.logsTab.dateTime")}];t.useEffect(()=>{i&&(async()=>{try{m(!0);const o=await I(i);g(o)}catch(o){console.error("Error fetching logs:",o),g([])}finally{m(!1)}})()},[i]);const d=h.filter(a=>(a.action_type||"").toLowerCase().includes(c.toLowerCase())||(a.action_value||"").toLowerCase().includes(c.toLowerCase())),w=(a,o)=>{u(o)},y=a=>{C(parseInt(a.target.value,10)),u(0)};return T?e.jsx(p,{children:e.jsx(x,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:200},children:e.jsx(v,{})})}):e.jsx(p,{children:e.jsxs(x,{sx:{p:3},children:[e.jsxs(A,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{mb:3},children:[e.jsx(b,{variant:"h6",children:s("dashboard.case.logsTab.heading")}),e.jsx(B,{value:c,onChange:a=>j(a.target.value),placeholder:s("dashboard.case.logsTab.searchPlaceholder"),InputProps:{startAdornment:e.jsx(H,{position:"start",children:e.jsx(S,{icon:"eva:search-fill"})})},sx:{width:300}})]}),e.jsx(D,{sx:{position:"relative",overflow:"unset"},children:e.jsx(E,{children:e.jsxs(F,{children:[e.jsx(_,{headCells:P}),e.jsx(V,{children:d.length===0?e.jsx(f,{children:e.jsx(n,{colSpan:3,align:"center",children:e.jsx(b,{variant:"body2",color:"text.secondary",children:h.length===0?s("dashboard.case.logsTab.noLogsFound"):s("dashboard.case.logsTab.noLogsMatchSearch")})})}):d.slice(l*r,l*r+r).map(a=>e.jsxs(f,{hover:!0,children:[e.jsx(n,{children:a.action_type}),e.jsx(n,{children:a.action_value||"-"}),e.jsx(n,{children:new Date(a.created_at).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]},a.id))})]})})}),e.jsx(R,{page:l,count:d.length,rowsPerPage:r,onPageChange:w,onRowsPerPageChange:y})]})})}export{Q as L};
