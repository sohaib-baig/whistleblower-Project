import{G as S,N as F,r,j as t,H as u,x as g,B as s,T as l,s as H}from"./index-BJkBHIXD.js";import{S as y}from"./Stack-DSqJGNfN.js";import{C as L}from"./Card-CU8jzKuK.js";async function N(n){try{const i=(await S.get(`/api/v1/public/companies/${n}`))?.data||{},e=i?.data??i;return e?{id:e.id,name:e.name||e.company_name||"Company",logo:e.logo_url||void 0}:null}catch(a){return console.error("Failed to load company details:",a),null}}function T(){const{companySlug:n}=F(),[a,i]=r.useState(""),[e,f]=r.useState(null),[p,j]=r.useState(""),[m,b]=r.useState(""),[C,d]=r.useState(!0);r.useEffect(()=>{(async()=>{if(!n){d(!1);return}try{d(!0);const o=await N(n);if(o&&(i(o.name||""),o.logo)){const c=o.logo.startsWith("http")?o.logo:`${g.serverUrl}${o.logo}`;f(c)}try{const h=(await H.get(`/api/v1/public/pages/reporting-page/${n}`)).data||{},x=h?.data??h;j(x.page_title||""),b(x.page_content||"")}catch(c){console.error("Failed to fetch reporting page:",c)}}catch(o){console.error("Failed to load data:",o)}finally{d(!1)}})()},[n]);const v=p||a||"Reporting Page";return C?t.jsxs(t.Fragment,{children:[t.jsx(u,{children:t.jsx("title",{children:`Reporting Page - ${g.appName}`})}),t.jsx(s,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(l,{children:"Loading..."})})]}):t.jsxs(t.Fragment,{children:[t.jsx(u,{children:t.jsx("title",{children:`${v} - ${g.appName}`})}),t.jsxs(s,{sx:{minHeight:"100vh",bgcolor:"grey.50"},children:[t.jsx(s,{sx:{bgcolor:"background.paper",borderBottom:1,borderColor:"divider",px:3,py:2},children:t.jsxs(y,{direction:"row",alignItems:"center",spacing:2,children:[e&&t.jsx(s,{component:"img",src:e,alt:a||"Company Logo",sx:{width:40,height:40,objectFit:"contain",borderRadius:1}}),a&&t.jsx(l,{variant:"h6",sx:{fontWeight:"bold"},children:a})]})}),t.jsx(s,{sx:{p:3,maxWidth:800,mx:"auto"},children:t.jsx(L,{sx:{p:4},children:t.jsxs(y,{spacing:3,children:[p&&t.jsx(l,{variant:"h4",sx:{fontWeight:"bold",color:"text.primary"},children:p}),m?t.jsx(s,{sx:{"& h1, & h2, & h3, & h4, & h5, & h6":{color:"text.primary",fontWeight:600,mb:2,mt:3,"&:first-of-type":{mt:0}},"& p":{color:"text.secondary",lineHeight:1.7,mb:2},"& ul, & ol":{pl:3,mb:2,"& li":{color:"text.secondary",lineHeight:1.7,mb:.5}},"& img":{maxWidth:"100%",display:"block"}},dangerouslySetInnerHTML:{__html:m}}):t.jsx(l,{variant:"body1",color:"text.secondary",children:"No content available."})]})})})]})]})}export{T as default};
