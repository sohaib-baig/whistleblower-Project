import{s,aD as o}from"./index-BJkBHIXD.js";async function n(a){try{return(await s.get("/api/v1/support-tickets",{params:a})).data}catch(t){throw new Error(t.message||"Failed to fetch support tickets")}}async function i(a){try{const e=(await s.get(`/api/v1/support-tickets/${a}`))?.data;if(e&&typeof e=="object"&&"data"in e)return e.data;if(e&&typeof e=="object"&&"id"in e)return e;throw new Error("Invalid response structure: "+JSON.stringify(e))}catch(t){throw new Error(t.response?.data?.message||t.message||"Failed to fetch support ticket")}}async function p(a){try{return(await s.post("/api/v1/support-tickets",a)).data.data}catch(t){throw new Error(t.message||"Failed to create support ticket")}}async function u(a,t){try{return(await s.put(`/api/v1/support-tickets/${a}/status`,{status:t})).data.data}catch(e){throw new Error(e.message||"Failed to update support ticket status")}}async function d(a){try{const e=(await s.get(`/api/v1/support-tickets/${a}/chats`))?.data;return e&&typeof e=="object"&&"data"in e?e:Array.isArray(e)?{data:e}:{data:[]}}catch(t){throw new Error(t.response?.data?.message||t.message||"Failed to fetch support ticket chats")}}async function h(a){try{const t=new FormData;t.append("support_ticket_id",a.support_ticket_id),t.append("content",a.content),a.attachment&&t.append("attachment",a.attachment);const r=(await s.post("/api/v1/support-tickets/chats",t,{headers:{"Content-Type":"multipart/form-data"}}))?.data;if(r&&typeof r=="object"&&"data"in r)return r.data;if(r&&typeof r=="object"&&"id"in r)return r;throw new Error("Invalid response structure")}catch(t){throw new Error(t.message||"Failed to send message")}}async function f(a){try{await s.put(`/api/v1/support-tickets/${a}/chats/mark-read`)}catch(t){throw new Error(t.message||"Failed to mark chats as read")}}async function w(a){try{return(await o()).filter(e=>e.status!=="closed"&&(!a||e.company?.id===a))}catch(t){throw new Error(t.message||"Failed to fetch active cases")}}export{h as a,i as b,p as c,d,n as e,w as f,f as m,u};
