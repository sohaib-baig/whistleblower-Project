import{V as d,r as s,bm as v,j as r,B as x,b,A as l,d as p,x as f}from"./index-BJkBHIXD.js";import"./new-password-icon-DzJdOKvQ.js";import"./text-transform-DM798QSo.js";import"./styles-B-zEs6qR.js";import"./account-change-password-DsljHT40.js";import{U as j}from"./user-create-edit-form-bgAKTpXd.js";import"./TextField-BfOXJaKd.js";import"./Select-CM-FquqI.js";import"./Stack-DSqJGNfN.js";import"./format-number-BErDzwe7.js";import"./rhf-phone-input-DvY4aKGv.js";import"./index.esm-DG78EUPk.js";import"./index-CDpvdXdB.js";import"./search-not-found-BYtFGFNz.js";import"./InputAdornment-Cyf39fZQ.js";import"./schema-utils-C_-d4BNQ.js";import"./schemas-BaSQ7w8v.js";import"./zod-DbnPk1Kl.js";import"./fields-wQ2IQIfM.js";import"./index-BdCJuPE0.js";import"./rhf-text-field-D45rQogC.js";import"./RadioGroup-eX8WPtuC.js";import"./FormControlLabel-Do9AncA_.js";import"./Autocomplete-vOabT0lM.js";import"./Chip-Cd7PxQUv.js";import"./rhf-select-BCHEEYe2.js";import"./upload-default-BMHhCMpu.js";import"./tslib.es6-CTYbIaVE.js";import"./DatePicker-D3hVcc_W.js";import"./form-provider-BYLnCB41.js";import"./Card-CU8jzKuK.js";import"./Grid-D_Et280v.js";const A=e=>e?e.startsWith("http://")||e.startsWith("https://")?e:`${f.serverUrl}${e.startsWith("/")?e:`/${e}`}`:"",h=e=>{if(!e)return"";if(/^\d{2}:\d{2}(:\d{2})?$/.test(e)){const o=e.substring(0,5),i=p().format("YYYY-MM-DD");return p(`${i} ${o}`,"YYYY-MM-DD HH:mm").format()}const t=p(e);return t.isValid()?t.format():e},U=e=>{const t=Array.isArray(e?.roles)&&e.roles.length?typeof e.roles[0]=="string"?e.roles[0]:e.roles[0]?.name:e?.primary_role||e?.role||"",o=e?.is_active===1?"active":e?.is_active===0?"banned":"pending";return{id:e?.id??"",name:e?.name??"",email:e?.email??"",phoneNumber:e?.phone??e?.phone_number??"",avatar:e?.avatar_path??"",avatarUrl:A(e?.avatar_url??e?.avatar??e?.avatar_path),role:t??"",status:o,company:e?.company_name??e?.company??"",companyNumber:e?.company_number??"",country:e?.country??null,address:e?.address??"",physicalAddress:e?.physical_address??"",phoneHoursFrom:h(e?.phone_hours_from),phoneHoursTo:h(e?.phone_hours_to),phoneHoursFormat:e?.phone_hours_format??"24h",userLanguage:e?.user_language??"en",state:e?.state??"",city:e?.city??"",zipCode:e?.zip_code??"",isVerified:!!e?.email_verified_at,createdAt:e?.created_at??new Date().toISOString(),updatedAt:e?.updated_at??new Date().toISOString()}};function C(){const{user:e}=d(),[t,o]=s.useState(null),[i,a]=s.useState(!0),[c,m]=s.useState(null),[y,g]=s.useState(0),u=s.useCallback(async()=>{if(!e?.id){m("Unable to load account details. User ID is missing."),a(!1);return}try{a(!0),m(null);const n=await v(e.id);o(U(n))}catch(n){m(n?.message||"Failed to load account details.")}finally{a(!1)}},[e?.id]);s.useEffect(()=>{u()},[u,y]);const _=()=>{g(n=>n+1)};return i?r.jsx(x,{sx:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:200},children:r.jsx(b,{size:32})}):c?r.jsx(l,{severity:"error",children:c}):t?r.jsx(j,{currentUser:t,onSaveSuccess:_}):r.jsx(l,{severity:"warning",children:"No account details available."})}function D(){return r.jsx(C,{})}const S={title:`Account general settings | Dashboard - ${f.appName}`};function ie(){return r.jsxs(r.Fragment,{children:[r.jsx("title",{children:S.title}),r.jsx(D,{})]})}export{ie as default};
