import{e as n,s as l,r,i as S}from"./index-BJkBHIXD.js";async function D(t){const e=new URLSearchParams;t?.search&&e.append("search",t.search),t?.status&&t.status!=="all"&&e.append("status",t.status),t?.per_page&&e.append("per_page",t.per_page.toString()),t?.page&&e.append("page",t.page.toString()),t?.sort&&e.append("sort",t.sort),t?.order&&e.append("order",t.order),t?.company_id&&e.append("company_id",t.company_id);const s=`${n.departments.list}?${e.toString()}`;return{data:(await l.get(s)).data}}async function w(t){const e=typeof n.departments.details=="function"?n.departments.details(t):n.departments.details;return(await l.get(e)).data}async function P(t){return await S(),(await l.post(n.departments.create,t)).data}async function v(t,e){const s=typeof n.departments.update=="function"?n.departments.update(t):n.departments.update;return await S(),(await l.put(s,e)).data}async function E(t){const e=typeof n.departments.delete=="function"?n.departments.delete(t):n.departments.delete;await S(),await l.delete(e)}function F(t){const[e,s]=r.useState([]),[o,c]=r.useState(!0),[f,p]=r.useState(null),[g,a]=r.useState({currentPage:1,perPage:15,total:0,lastPage:1}),d=JSON.stringify(t),y=r.useCallback(async()=>{try{c(!0),p(null);const u=d?JSON.parse(d):void 0,i=await D(u),h=i.data.data.map(m=>({id:m.id,name:m.name,status:m.status||"active",createdAt:m.created_at,isActive:m.status==="active"}));s(h),a({currentPage:i.data.current_page,perPage:i.data.per_page,total:i.data.total,lastPage:i.data.last_page})}catch(u){console.error("Failed to fetch departments:",u),p(u instanceof Error?u.message:"Failed to fetch departments"),s([])}finally{c(!1)}},[d]);return r.useEffect(()=>{y()},[y]),{departments:e,loading:o,error:f,pagination:g,refetch:y}}function A(t){const[e,s]=r.useState(null),[o,c]=r.useState(!0),[f,p]=r.useState(null);return r.useEffect(()=>{async function g(){try{c(!0),p(null);const a=await w(t),d={id:a.id,name:a.name,status:a.status||"active",createdAt:a.created_at,isActive:a.status==="active"};s(d)}catch(a){console.error("Failed to fetch department:",a),p(a instanceof Error?a.message:"Failed to fetch department"),s(null)}finally{c(!1)}}t&&g()},[t]),{department:e,loading:o,error:f}}export{F as a,v as b,P as c,E as d,D as f,A as u};
