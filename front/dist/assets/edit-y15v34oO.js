import{w as y,u as W,a4 as u,a0 as b,p as a,r as z,j as e,B as o,T as s,a7 as f,I as j,a5 as V,a6 as A,c as h,W as G,aa as M,x as N}from"./index-BJkBHIXD.js";import"./empty-content-Cck_Y1yy.js";import{a as R}from"./index.esm-DG78EUPk.js";import{a as U}from"./zod-DbnPk1Kl.js";import{u as _,a as q}from"./login-page-Du9-CVJB.js";import{F as P}from"./fields-wQ2IQIfM.js";import{s as O}from"./schema-utils-C_-d4BNQ.js";import{F as $}from"./form-provider-BYLnCB41.js";import{S as n}from"./Stack-DSqJGNfN.js";import{C as v}from"./Card-CU8jzKuK.js";import{C as J}from"./CardHeader-BmHD0Q2N.js";import{o as K,s as Q}from"./schemas-BaSQ7w8v.js";import"./text-transform-DM798QSo.js";import"./TextField-BfOXJaKd.js";import"./Select-CM-FquqI.js";import"./index-BdCJuPE0.js";import"./rhf-phone-input-DvY4aKGv.js";import"./index-CDpvdXdB.js";import"./search-not-found-BYtFGFNz.js";import"./InputAdornment-Cyf39fZQ.js";import"./rhf-text-field-D45rQogC.js";import"./RadioGroup-eX8WPtuC.js";import"./FormControlLabel-Do9AncA_.js";import"./Autocomplete-vOabT0lM.js";import"./Chip-Cd7PxQUv.js";import"./rhf-select-BCHEEYe2.js";import"./styles-B-zEs6qR.js";import"./format-number-BErDzwe7.js";import"./upload-default-BMHhCMpu.js";import"./tslib.es6-CTYbIaVE.js";import"./DatePicker-D3hVcc_W.js";const X=t=>K({title:Q().optional(),content:O.editor().min(20,{message:t("dashboard.loginPage.errors.contentMinLength")})});function Y(){const{t}=y("navbar"),l=W(),{data:d,isLoading:C}=_(),w=q(),L=X(t),c=u(),m=u(!0),I={title:"",content:""},p=R({mode:"all",resolver:U(L),defaultValues:I,values:d?{title:d.title,content:d.content}:void 0}),{watch:E,handleSubmit:F,formState:{isSubmitting:S,isValid:x}}=p,g=E(),H=F(async r=>{try{const i={...r,title:r.title?.trim()||""};await w.mutateAsync(i),b.success(t("dashboard.loginPage.toast.updatedSuccessfully")),l.push(a.dashboard.loginPage.root)}catch(i){console.error(i),b.error(t("dashboard.loginPage.toast.updateFailed"))}}),k=z.useCallback(()=>{l.push(a.dashboard.loginPage.root)},[l]),B=(r,i)=>e.jsx(f,{onClick:i,children:e.jsx(j,{icon:r?"eva:arrow-ios-downward-fill":"eva:arrow-ios-forward-fill"})}),D=()=>e.jsxs(v,{children:[e.jsx(J,{title:t("dashboard.loginPage.form.title"),subheader:t("dashboard.loginPage.form.subheader"),action:B(m.value,m.onToggle),sx:{mb:3}}),e.jsxs(V,{in:m.value,children:[e.jsx(A,{}),e.jsxs(n,{spacing:3,sx:{p:3},children:[e.jsx(P.Text,{name:"title",label:t("dashboard.loginPage.form.titleLabel")}),e.jsxs(n,{spacing:1.5,children:[e.jsx(s,{variant:"subtitle2",children:t("dashboard.loginPage.form.content")}),e.jsx(P.Editor,{name:"content",fullItem:!0,sx:{maxHeight:600,"& .ql-editor":{minHeight:400}}}),e.jsx(s,{variant:"caption",color:"text.secondary",sx:{mt:1},children:t("dashboard.loginPage.form.tip")})]})]})]})]}),T=()=>e.jsxs(o,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"flex-end",gap:2,p:2.5},children:[e.jsx(h,{color:"inherit",variant:"outlined",size:"medium",onClick:c.onTrue,disabled:!x,children:t("dashboard.loginPage.actions.preview")}),e.jsx(h,{color:"inherit",variant:"outlined",size:"medium",onClick:k,children:t("dashboard.loginPage.actions.cancel")}),e.jsx(h,{type:"submit",variant:"contained",size:"medium",loading:S,disabled:!x,children:t("dashboard.loginPage.actions.saveChanges")})]});return C?e.jsx(o,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400},children:e.jsx(s,{children:t("dashboard.loginPage.loading")})}):e.jsxs($,{methods:p,onSubmit:H,children:[e.jsxs(n,{spacing:5,sx:{mx:"auto",maxWidth:{xs:720,xl:880}},children:[D(),T()]}),c.value&&e.jsx(o,{sx:{position:"fixed",top:0,left:0,right:0,bottom:0,bgcolor:"rgba(0, 0, 0, 0.5)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",p:2},children:e.jsxs(v,{sx:{maxWidth:"90vw",maxHeight:"90vh",overflow:"auto",position:"relative"},children:[e.jsx(o,{sx:{p:2,borderBottom:1,borderColor:"divider"},children:e.jsxs(n,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(s,{variant:"h6",children:t("dashboard.loginPage.actions.preview")}),e.jsx(f,{onClick:c.onFalse,children:e.jsx(j,{icon:"solar:close-circle-bold"})})]})}),e.jsxs(o,{sx:{p:3},children:[g.title?.trim()&&e.jsx(s,{variant:"h4",sx:{mb:2},children:g.title}),e.jsx(o,{sx:{"& h1, & h2, & h3, & h4, & h5, & h6":{color:"text.primary",fontWeight:600,mb:2,mt:3,"&:first-of-type":{mt:0}},"& p":{color:"text.secondary",lineHeight:1.7,mb:2},"& ul, & ol":{pl:3,mb:2,"& li":{color:"text.secondary",lineHeight:1.7,mb:.5}}},dangerouslySetInnerHTML:{__html:g.content}})]})]})})]})}function Z(){const{t}=y("navbar");return e.jsxs(G,{children:[e.jsx(M,{heading:t("dashboard.loginPage.editLoginPage"),backHref:a.dashboard.loginPage.root,links:[{name:"Dashboard",href:a.dashboard.root},{name:t("sidebar.pages"),href:a.dashboard.user.root},{name:t("dashboard.loginPage.heading"),href:a.dashboard.loginPage.root},{name:t("dashboard.loginPage.edit")}],sx:{mb:{xs:3,md:5}}}),e.jsx(Y,{})]})}const ee={title:`Edit Login Page | Dashboard - ${N.appName}`};function Be(){return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:ee.title}),e.jsx(Z,{})]})}export{Be as default};
