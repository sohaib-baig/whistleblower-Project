import{r as c,w as x,j as a,I as C,u as y,a0 as m,p as F,B as I,M as w,c as u}from"./index-BJkBHIXD.js";import{S as f}from"./Stack-DSqJGNfN.js";import{T as E}from"./TextField-BfOXJaKd.js";import{I as A}from"./InputAdornment-Cyf39fZQ.js";import{a as G}from"./index.esm-DG78EUPk.js";import{a as R}from"./zod-DbnPk1Kl.js";import{b as k,c as B}from"./state-DFemdeiH.js";import{F as h}from"./fields-wQ2IQIfM.js";import{F as O}from"./form-provider-BYLnCB41.js";import{G as p}from"./Grid-D_Et280v.js";import{C as q}from"./Card-CU8jzKuK.js";import{o as M,s as b}from"./schemas-BaSQ7w8v.js";const N=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}];function P({filters:e,onFilters:r,statusOptions:d}){const{t}=x("navbar"),[o,i]=c.useState(e.name);c.useEffect(()=>{i(e.name)},[e.name]),c.useEffect(()=>{const n=setTimeout(()=>{o!==e.name&&r("name",o)},500);return()=>clearTimeout(n)},[o,e,r]);const l=c.useCallback(n=>{i(n.target.value)},[]);return a.jsx(f,{spacing:2.5,direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:a.jsx(E,{fullWidth:!0,value:o,onChange:l,placeholder:t("dashboard.state.search.placeholder"),InputProps:{startAdornment:a.jsx(A,{position:"start",children:a.jsx(C,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})})}const Z=c.memo(P),_=e=>M({name:b().min(1,{error:e("dashboard.state.errors.nameRequired")}),status:b().min(1,{error:e("dashboard.state.errors.statusRequired")})});function $({currentState:e,onClose:r,onSuccess:d}){const{t}=x("navbar"),o=y(),i={status:"active",name:""},l=_(t),n=G({mode:"onSubmit",resolver:R(l),defaultValues:i,values:e}),{reset:v,handleSubmit:S,formState:{isSubmitting:j}}=n,T=S(async s=>{try{e?(await k(e.id,s),m.success(t("dashboard.state.toast.updatedSuccessfully"))):(await B(s),m.success(t("dashboard.state.toast.createdSuccessfully"))),v(),d&&d(),r?r():o.push(F.dashboard.state.root)}catch(g){console.error("Failed to save state:",g),m.error(t("dashboard.state.toast.saveFailed"))}});return a.jsx(O,{methods:n,onSubmit:T,children:a.jsx(p,{container:!0,spacing:3,children:a.jsx(p,{size:{xs:12},children:a.jsxs(q,{sx:{p:3},children:[a.jsxs(I,{sx:{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[a.jsx(h.Text,{name:"name",label:t("dashboard.state.form.stateName")}),a.jsx(h.Select,{name:"status",label:t("dashboard.state.form.status"),placeholder:t("dashboard.state.form.selectStatus"),children:N.map(s=>a.jsx(w,{value:s.value,children:s.value==="active"?t("dashboard.state.status.active"):s.value==="inactive"?t("dashboard.state.status.inactive"):s.label},s.value))})]}),a.jsxs(f,{direction:"row",spacing:2,sx:{mt:3,justifyContent:"flex-end"},children:[r&&a.jsx(u,{variant:"outlined",onClick:r,children:"Cancel"}),a.jsx(u,{type:"submit",variant:"contained",loading:j,children:t(e?"dashboard.state.actions.saveChanges":"dashboard.state.actions.createState")})]})]})})})})}export{$ as S,Z as a,N as b};
