import{bN as a,r as s,i as A,s as v,e as o,w as S,j as h,I as w}from"./index-BJkBHIXD.js";import{S as x}from"./Stack-DSqJGNfN.js";import{T as b}from"./TextField-BfOXJaKd.js";import{I as T}from"./InputAdornment-Cyf39fZQ.js";const k=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}];a.id(1),a.time(1),a.id(2),a.time(2),a.id(3),a.time(3),a.id(4),a.time(4),a.id(5),a.time(5),a.id(6),a.time(6),a.id(7),a.time(7),a.id(8),a.time(8);async function E(e){const t=new URLSearchParams;e?.search&&t.append("search",e.search),e?.status&&e.status!=="all"&&t.append("status",e.status),e?.per_page&&t.append("per_page",e.per_page.toString()),e?.page&&t.append("page",e.page.toString()),e?.sort&&t.append("sort",e.sort),e?.order&&t.append("order",e.order);const r=`${o.categories.list}?${t.toString()}`;return{data:(await v.get(r)).data}}async function _(e){const t=typeof o.categories.details=="function"?o.categories.details(e):o.categories.details;return(await v.get(t)).data}async function L(e){return await A(),(await v.post(o.categories.create,e)).data}async function N(e,t){const r=typeof o.categories.update=="function"?o.categories.update(e):o.categories.update;return await A(),(await v.put(r,t)).data}async function D(e){const t=typeof o.categories.delete=="function"?o.categories.delete(e):o.categories.delete;await A(),await v.delete(t)}function G(e){const[t,r]=s.useState([]),[c,i]=s.useState(!0),[l,u]=s.useState(null),[d,n]=s.useState({currentPage:1,perPage:15,total:0,lastPage:1}),p=JSON.stringify(e),y=s.useCallback(async()=>{try{i(!0),u(null);const g=p?JSON.parse(p):void 0,m=await E(g),C=m.data.data.map(f=>({id:f.id,name:f.name,status:f.status||"active",createdAt:f.created_at,isActive:f.status==="active"}));r(C),n({currentPage:m.data.current_page,perPage:m.data.per_page,total:m.data.total,lastPage:m.data.last_page})}catch(g){console.error("Failed to fetch categories:",g),u(g instanceof Error?g.message:"Failed to fetch categories"),r([])}finally{i(!1)}},[p]);return s.useEffect(()=>{y()},[y]),{categories:t,loading:c,error:l,pagination:d,refetch:y}}function R(e){const[t,r]=s.useState(null),[c,i]=s.useState(!0),[l,u]=s.useState(null);return s.useEffect(()=>{async function d(){try{i(!0),u(null);const n=await _(e),p={id:n.id,name:n.name,status:n.status||"active",createdAt:n.created_at,isActive:n.status==="active"};r(p)}catch(n){console.error("Failed to fetch category:",n),u(n instanceof Error?n.message:"Failed to fetch category"),r(null)}finally{i(!1)}}e&&d()},[e]),{category:t,loading:c,error:l}}function P({filters:e,onFilters:t,statusOptions:r}){const{t:c}=S("navbar"),[i,l]=s.useState(e.name);s.useEffect(()=>{l(e.name)},[e.name]),s.useEffect(()=>{const d=setTimeout(()=>{i!==e.name&&t("name",i)},500);return()=>clearTimeout(d)},[i,e,t]);const u=s.useCallback(d=>{l(d.target.value)},[]);return h.jsx(x,{spacing:2.5,direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:h.jsx(b,{fullWidth:!0,value:i,onChange:u,placeholder:c("dashboard.category.searchCategories"),InputProps:{startAdornment:h.jsx(T,{position:"start",children:h.jsx(w,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})})}const J=s.memo(P);export{k as C,R as a,G as b,L as c,D as d,J as e,N as u};
