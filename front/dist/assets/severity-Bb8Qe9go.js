import{e as s,s as f,r as n,i as y}from"./index-BJkBHIXD.js";async function h(e){const t=new URLSearchParams;e?.search&&t.append("search",e.search),e?.status&&e.status!=="all"&&t.append("status",e.status),e?.per_page&&t.append("per_page",e.per_page.toString()),e?.page&&t.append("page",e.page.toString()),e?.sort&&t.append("sort",e.sort),e?.order&&t.append("order",e.order),e?.company_id&&t.append("company_id",e.company_id);const r=`${s.severities.list}?${t.toString()}`;return{data:(await f.get(r)).data}}async function w(e){const t=typeof s.severities.details=="function"?s.severities.details(e):s.severities.details;return(await f.get(t)).data}async function P(e){return await y(),(await f.post(s.severities.create,e)).data}async function E(e,t){const r=typeof s.severities.update=="function"?s.severities.update(e):s.severities.update;return await y(),(await f.put(r,t)).data}async function F(e){const t=typeof s.severities.delete=="function"?s.severities.delete(e):s.severities.delete;await y(),await f.delete(t)}function A(e){const[t,r]=n.useState([]),[i,o]=n.useState(!0),[v,c]=n.useState(null),[g,a]=n.useState({currentPage:1,perPage:15,total:0,lastPage:1}),u=JSON.stringify(e),S=n.useCallback(async()=>{try{o(!0),c(null);const d=u?JSON.parse(u):void 0,p=await h(d),m=p.data.data.map(l=>({id:l.id,name:l.name,status:l.status||"active",createdAt:l.created_at,isActive:l.status==="active"}));r(m),a({currentPage:p.data.current_page,perPage:p.data.per_page,total:p.data.total,lastPage:p.data.last_page})}catch(d){console.error("Failed to fetch severities:",d),c(d instanceof Error?d.message:"Failed to fetch severities"),r([])}finally{o(!1)}},[u]);return n.useEffect(()=>{S()},[S]),{severities:t,loading:i,error:v,pagination:g,refetch:S}}function L(e){const[t,r]=n.useState(null),[i,o]=n.useState(!0),[v,c]=n.useState(null);return n.useEffect(()=>{async function g(){try{o(!0),c(null);const a=await w(e),u={id:a.id,name:a.name,status:a.status||"active",createdAt:a.created_at,isActive:a.status==="active"};r(u)}catch(a){console.error("Failed to fetch severity:",a),c(a instanceof Error?a.message:"Failed to fetch severity"),r(null)}finally{o(!1)}}e&&g()},[e]),{severity:t,loading:i,error:v}}export{A as a,E as b,P as c,F as d,h as f,L as u};
