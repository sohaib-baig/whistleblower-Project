import{r,i as g,s as c,e as n}from"./index-BJkBHIXD.js";async function S(e){const a=new URLSearchParams;e?.search&&a.append("search",e.search),e?.status&&e.status!=="all"&&a.append("status",e.status),e?.per_page&&a.append("per_page",e.per_page.toString()),e?.page&&a.append("page",e.page.toString()),e?.sort&&a.append("sort",e.sort),e?.order&&a.append("order",e.order);const t=`${n.emailTemplates.list}?${a.toString()}`;return{data:(await c.get(t)).data}}async function E(e){const a=typeof n.emailTemplates.details=="function"?n.emailTemplates.details(e):n.emailTemplates.details;return(await c.get(a)).data}async function _(e,a){const t=new URLSearchParams;t.append("name",e),t.append("language",a);const l=`${n.emailTemplates.getByNameAndLanguage}?${t.toString()}`;return(await c.get(l)).data}async function P(e){return await g(),(await c.post(n.emailTemplates.create,e)).data}async function v(e,a){const t=typeof n.emailTemplates.update=="function"?n.emailTemplates.update(e):n.emailTemplates.update;return await g(),(await c.put(t,a)).data}async function b(e){const a=typeof n.emailTemplates.delete=="function"?n.emailTemplates.delete(e):n.emailTemplates.delete;await g(),await c.delete(a)}async function A(e,a){await g();const t=typeof n.emailTemplates.convert=="function"?n.emailTemplates.convert(e):n.emailTemplates.convert;return(await c.post(t,{target_language:a})).data}function L(e){const[a,t]=r.useState([]),[l,p]=r.useState(!0),[f,i]=r.useState(null),[T,s]=r.useState({currentPage:1,perPage:15,total:0,lastPage:1}),u=JSON.stringify(e),y=r.useCallback(async()=>{try{p(!0),i(null);const m=u?JSON.parse(u):void 0,d=await S(m),h=d.data.data.map(o=>({id:o.id,name:o.name,subject:o.subject,content:o.content,placeholder:o.placeholder||"",language:o.language||"en",status:o.status||"active",createdAt:o.created_at,updatedAt:o.updated_at}));t(h),s({currentPage:d.data.current_page,perPage:d.data.per_page,total:d.data.total,lastPage:d.data.last_page})}catch(m){console.error("Failed to fetch email templates:",m),i(m instanceof Error?m.message:"Failed to fetch email templates"),t([])}finally{p(!1)}},[u]);return r.useEffect(()=>{y()},[y]),{templates:a,loading:l,error:f,pagination:T,refetch:y}}function F(e){const[a,t]=r.useState(null),[l,p]=r.useState(!0),[f,i]=r.useState(null);return r.useEffect(()=>{async function T(){try{p(!0),i(null);const s=await E(e),u={id:s.id,name:s.name,subject:s.subject,content:s.content,placeholder:s.placeholder||"",language:s.language||"en",status:s.status||"active",createdAt:s.created_at,updatedAt:s.updated_at};t(u)}catch(s){console.error("Failed to fetch email template:",s),i(s instanceof Error?s.message:"Failed to fetch email template"),t(null)}finally{p(!1)}}e&&T()},[e]),{template:a,loading:l,error:f}}export{v as a,A as b,P as c,L as d,b as e,_ as f,F as u};
