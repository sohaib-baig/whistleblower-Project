import{r as a,e as i,s as u,i as y}from"./index-BJkBHIXD.js";async function d(){return(await u.get(i.pages.policyPage.get)).data}async function f(s){await y();const c={page_title:s.title?.trim()||null,page_content:s.content};return(await u.put(i.pages.policyPage.update,c)).data}function P(){const[s,n]=a.useState(null),[c,o]=a.useState(!0),[p,l]=a.useState(null),r=a.useCallback(async()=>{try{o(!0),l(null);const e=await d(),t={id:e.id||null,title:e.page_title?.trim()||"",content:e.page_content||"<p>Company policy content goes here.</p>",lastUpdated:e.updated_at||null,pageType:e.page_type||"company_policy"};n(t)}catch(e){console.error("Failed to fetch policy page:",e);const t=e?.message||e?.response?.data?.message||"Failed to fetch policy page",g=e?.httpStatus||e?.response?.status;console.error("Policy page fetch error details:",{message:t,status:g,url:i.pages.policyPage.get,error:e}),l(t),n({id:null,title:"",content:"<p>Company policy content goes here.</p>",lastUpdated:null,pageType:"company_policy"})}finally{o(!1)}},[]);return a.useEffect(()=>{r()},[r]),{data:s,isLoading:c,error:p,refetch:r}}function _(){const[s,n]=a.useState(!1),[c,o]=a.useState(!1),[p,l]=a.useState(null),r=a.useCallback(async e=>{n(!0),o(!1),l(null);try{const t=await f(e);return{id:t.id,title:t.page_title,content:t.page_content,lastUpdated:t.updated_at,pageType:t.page_type||"company_policy"}}catch(t){throw o(!0),l(t instanceof Error?t.message:"Failed to update policy page"),t}finally{n(!1)}},[]);return{mutate:r,mutateAsync:r,isPending:s,isError:c,error:p}}export{_ as a,P as u};
