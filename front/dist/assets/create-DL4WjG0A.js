import{w as j,u as R,r as d,a0 as x,p as b,j as e,B as q,M as s,T as v,c as T,C as B,x as G}from"./index-BJkBHIXD.js";import"./empty-content-Cck_Y1yy.js";import"./text-transform-DM798QSo.js";import"./styles-B-zEs6qR.js";import{a as I}from"./index.esm-DG78EUPk.js";import{a as V}from"./zod-DbnPk1Kl.js";import{c as H,f as k}from"./email-template-DfGgWqTD.js";import{F as r}from"./fields-wQ2IQIfM.js";import{s as D}from"./schema-utils-C_-d4BNQ.js";import{F as M}from"./form-provider-BYLnCB41.js";import{G as f}from"./Grid-D_Et280v.js";import{C as P}from"./Card-CU8jzKuK.js";import{S as m}from"./Stack-DSqJGNfN.js";import{o as z,s as i}from"./schemas-BaSQ7w8v.js";import"./TextField-BfOXJaKd.js";import"./Select-CM-FquqI.js";import"./format-number-BErDzwe7.js";import"./index-BdCJuPE0.js";import"./rhf-phone-input-DvY4aKGv.js";import"./index-CDpvdXdB.js";import"./search-not-found-BYtFGFNz.js";import"./InputAdornment-Cyf39fZQ.js";import"./rhf-text-field-D45rQogC.js";import"./RadioGroup-eX8WPtuC.js";import"./FormControlLabel-Do9AncA_.js";import"./Autocomplete-vOabT0lM.js";import"./Chip-Cd7PxQUv.js";import"./rhf-select-BCHEEYe2.js";import"./upload-default-BMHhCMpu.js";import"./tslib.es6-CTYbIaVE.js";import"./DatePicker-D3hVcc_W.js";function A(){const{t:a}=j("navbar"),c=R(),S=z({name:i().min(1,{message:a("dashboard.emailTemplate.validation.templateNameRequired")}),subject:i().min(1,{message:a("dashboard.emailTemplate.validation.subjectRequired")}),content:D.editor().min(1,{message:a("dashboard.emailTemplate.validation.contentRequired")}),placeholder:i().optional(),language:i().min(1,{message:a("dashboard.emailTemplate.validation.languageRequired")}),status:i().min(1,{message:a("dashboard.emailTemplate.validation.statusRequired")})}),E={name:"",subject:"",content:"",placeholder:"",language:"en",status:"active"},p=I({mode:"onSubmit",resolver:V(S),defaultValues:E}),{reset:y,handleSubmit:w,watch:u,setValue:l,formState:{isSubmitting:C}}=p,o=u("language"),n=u("name"),[L,h]=d.useState(!1),[O,F]=d.useState("en");d.useEffect(()=>{(async()=>{if(!(!n||o===O)){h(!0);try{const t=await k(n,o);t?(l("subject",t.subject||""),l("content",t.content||""),l("status",t.status||"active"),l("placeholder",t.placeholder||"")):(l("subject",""),l("content",""),l("status","active")),F(o)}catch(t){console.error("Failed to load template for language:",t)}finally{h(!1)}}})()},[o,n]);const N=w(async g=>{try{await H(g),y(),x.success(a("dashboard.emailTemplate.toast.createSuccess")),c.push(b.dashboard.emailTemplate.root)}catch(t){console.error(t),x.error(a("dashboard.emailTemplate.toast.createError"))}});return e.jsx(M,{methods:p,onSubmit:N,children:e.jsx(f,{container:!0,spacing:3,children:e.jsx(f,{size:{xs:12},children:e.jsxs(P,{sx:{p:3},children:[e.jsxs(q,{sx:{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[e.jsx(r.Text,{name:"name",label:a("dashboard.emailTemplate.form.templateName")}),e.jsx(r.Text,{name:"subject",label:a("dashboard.emailTemplate.form.subject")}),e.jsxs(r.Select,{name:"language",label:a("dashboard.emailTemplate.form.language"),disabled:L,children:[e.jsx(s,{value:"en",children:a("dashboard.emailTemplate.languageOptions.en")}),e.jsx(s,{value:"sv",children:a("dashboard.emailTemplate.languageOptions.sv")}),e.jsx(s,{value:"no",children:a("dashboard.emailTemplate.languageOptions.no")}),e.jsx(s,{value:"da",children:a("dashboard.emailTemplate.languageOptions.da")}),e.jsx(s,{value:"fi",children:a("dashboard.emailTemplate.languageOptions.fi")}),e.jsx(s,{value:"fr",children:a("dashboard.emailTemplate.languageOptions.fr")}),e.jsx(s,{value:"de",children:a("dashboard.emailTemplate.languageOptions.de")})]}),e.jsxs(r.Select,{name:"status",label:a("dashboard.emailTemplate.form.status"),placeholder:a("dashboard.emailTemplate.form.selectStatus"),children:[e.jsx(s,{value:"active",children:a("dashboard.emailTemplate.statusOptions.active")}),e.jsx(s,{value:"inactive",children:a("dashboard.emailTemplate.statusOptions.inactive")})]})]}),e.jsxs(m,{spacing:3,sx:{mt:3},children:[e.jsxs(m,{spacing:1.5,children:[e.jsx(v,{variant:"subtitle2",children:a("dashboard.emailTemplate.form.content")}),e.jsx(r.Editor,{name:"content",fullItem:!0,sx:{maxHeight:400,"& .ql-editor":{minHeight:200}}})]}),e.jsx(r.Text,{name:"placeholder",label:a("dashboard.emailTemplate.form.placeholderVariables"),placeholder:a("dashboard.emailTemplate.form.placeholderExample"),multiline:!0,rows:3,helperText:a("dashboard.emailTemplate.form.placeholderHelperText")})]}),e.jsx(m,{sx:{mt:3,alignItems:"flex-end"},children:e.jsxs(m,{direction:"row",spacing:2,children:[e.jsx(T,{variant:"outlined",onClick:()=>c.push(b.dashboard.emailTemplate.root),children:a("dashboard.emailTemplate.form.cancel")}),e.jsx(T,{type:"submit",variant:"contained",loading:C,children:a("dashboard.emailTemplate.form.save")})]})})]})})})})}function U(){const{t:a}=j("navbar");return e.jsxs(B,{maxWidth:"xl",children:[e.jsx(v,{variant:"h4",sx:{mb:5},children:a("dashboard.emailTemplate.createNewEmailTemplate")}),e.jsx(A,{})]})}const W={title:`Create Email Template | Dashboard - ${G.appName}`};function ye(){return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:W.title}),e.jsx(U,{})]})}export{ye as default};
