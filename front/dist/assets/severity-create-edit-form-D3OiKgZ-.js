import{r as n,w as b,j as e,I as g,u as C,a0 as m,p as I,B as F,M as E,c as u}from"./index-BJkBHIXD.js";import{S as x}from"./Stack-DSqJGNfN.js";import{T as w}from"./TextField-BfOXJaKd.js";import{I as R}from"./InputAdornment-Cyf39fZQ.js";import{a as A}from"./index.esm-DG78EUPk.js";import{a as G}from"./zod-DbnPk1Kl.js";import{b as k,c as B}from"./severity-Bb8Qe9go.js";import{F as v}from"./fields-wQ2IQIfM.js";import{F as O}from"./form-provider-BYLnCB41.js";import{G as h}from"./Grid-D_Et280v.js";import{C as q}from"./Card-CU8jzKuK.js";import{o as M,s as p}from"./schemas-BaSQ7w8v.js";const N=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}];function P({filters:a,onFilters:r,statusOptions:d}){const{t:s}=b("navbar"),[o,c]=n.useState(a.name);n.useEffect(()=>{c(a.name)},[a.name]),n.useEffect(()=>{const i=setTimeout(()=>{o!==a.name&&r("name",o)},500);return()=>clearTimeout(i)},[o,a,r]);const l=n.useCallback(i=>{c(i.target.value)},[]);return e.jsx(x,{spacing:2.5,direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:e.jsx(w,{fullWidth:!0,value:o,onChange:l,placeholder:s("dashboard.severity.search.placeholder"),InputProps:{startAdornment:e.jsx(R,{position:"start",children:e.jsx(g,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})})}const Z=n.memo(P),V=a=>M({name:p().min(1,{error:a("dashboard.severity.errors.nameRequired")}),status:p().min(1,{error:a("dashboard.severity.errors.statusRequired")})});function $({currentSeverity:a,onClose:r,onSuccess:d}){const{t:s}=b("navbar"),o=C(),c={status:"active",name:""},l=V(s),i=A({mode:"onSubmit",resolver:G(l),defaultValues:c,values:a}),{reset:f,handleSubmit:y,formState:{isSubmitting:S}}=i,j=y(async t=>{try{a?(await k(a.id,t),m.success(s("dashboard.severity.toast.updatedSuccessfully"))):(await B(t),m.success(s("dashboard.severity.toast.createdSuccessfully"))),f(),d&&d(),r?r():o.push(I.dashboard.severity.root)}catch(T){console.error("Failed to save severity:",T),m.error(s("dashboard.severity.toast.saveFailed"))}});return e.jsx(O,{methods:i,onSubmit:j,children:e.jsx(h,{container:!0,spacing:3,children:e.jsx(h,{size:{xs:12},children:e.jsxs(q,{sx:{p:3},children:[e.jsxs(F,{sx:{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[e.jsx(v.Text,{name:"name",label:s("dashboard.severity.form.severityName")}),e.jsx(v.Select,{name:"status",label:s("dashboard.severity.form.status"),placeholder:s("dashboard.severity.form.selectStatus"),children:N.map(t=>e.jsx(E,{value:t.value,children:t.value==="active"?s("dashboard.severity.status.active"):t.value==="inactive"?s("dashboard.severity.status.inactive"):t.label},t.value))})]}),e.jsxs(x,{direction:"row",spacing:2,sx:{mt:3,justifyContent:"flex-end"},children:[r&&e.jsx(u,{variant:"outlined",onClick:r,children:"Cancel"}),e.jsx(u,{type:"submit",variant:"contained",loading:S,children:s(a?"dashboard.severity.actions.saveChanges":"dashboard.severity.actions.createSeverity")})]})]})})})})}export{$ as S,Z as a,N as b};
