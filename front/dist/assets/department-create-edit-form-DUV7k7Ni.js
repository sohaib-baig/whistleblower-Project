import{r as m,w as x,j as e,I as C,u as y,a0 as l,p as F,B as I,M as D,c as u}from"./index-BJkBHIXD.js";import{S as f}from"./Stack-DSqJGNfN.js";import{T as E}from"./TextField-BfOXJaKd.js";import{I as w}from"./InputAdornment-Cyf39fZQ.js";import{a as A}from"./index.esm-DG78EUPk.js";import{a as R}from"./zod-DbnPk1Kl.js";import{b as G,c as k}from"./department-BOJZtc9U.js";import{F as p}from"./fields-wQ2IQIfM.js";import{F as B}from"./form-provider-BYLnCB41.js";import{G as h}from"./Grid-D_Et280v.js";import{C as M}from"./Card-CU8jzKuK.js";import{o as N,s as b}from"./schemas-BaSQ7w8v.js";const O=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}];function P({filters:a,onFilters:s,statusOptions:c}){const{t}=x("navbar"),[o,d]=m.useState(a.name);m.useEffect(()=>{d(a.name)},[a.name]),m.useEffect(()=>{const n=setTimeout(()=>{o!==a.name&&s("name",o)},500);return()=>clearTimeout(n)},[o,a,s]);const i=m.useCallback(n=>{d(n.target.value)},[]);return e.jsx(f,{spacing:2.5,direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:e.jsx(E,{fullWidth:!0,value:o,onChange:i,placeholder:t("dashboard.department.search.placeholder"),InputProps:{startAdornment:e.jsx(w,{position:"start",children:e.jsx(C,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})})}const Z=m.memo(P),q=a=>N({name:b().min(1,{error:a("dashboard.department.errors.nameRequired")}),status:b().min(1,{error:a("dashboard.department.errors.statusRequired")})});function $({currentDepartment:a,onClose:s,onSuccess:c}){const{t}=x("navbar"),o=y(),d={status:"active",name:""},i=q(t),n=A({mode:"onSubmit",resolver:R(i),defaultValues:d,values:a}),{reset:v,handleSubmit:j,formState:{isSubmitting:S}}=n,T=j(async r=>{try{a?(await G(a.id,r),l.success(t("dashboard.department.toast.updatedSuccessfully"))):(await k(r),l.success(t("dashboard.department.toast.createdSuccessfully"))),v(),c&&c(),s?s():o.push(F.dashboard.department.root)}catch(g){console.error("Failed to save department:",g),l.error(t("dashboard.department.toast.saveFailed"))}});return e.jsx(B,{methods:n,onSubmit:T,children:e.jsx(h,{container:!0,spacing:3,children:e.jsx(h,{size:{xs:12},children:e.jsxs(M,{sx:{p:3},children:[e.jsxs(I,{sx:{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[e.jsx(p.Text,{name:"name",label:t("dashboard.department.form.departmentName")}),e.jsx(p.Select,{name:"status",label:t("dashboard.department.form.status"),placeholder:t("dashboard.department.form.selectStatus"),children:O.map(r=>e.jsx(D,{value:r.value,children:r.value==="active"?t("dashboard.department.status.active"):r.value==="inactive"?t("dashboard.department.status.inactive"):r.label},r.value))})]}),e.jsxs(f,{direction:"row",spacing:2,sx:{mt:3,justifyContent:"flex-end"},children:[s&&e.jsx(u,{variant:"outlined",onClick:s,children:"Cancel"}),e.jsx(u,{type:"submit",variant:"contained",loading:S,children:t(a?"dashboard.department.actions.saveChanges":"dashboard.department.actions.createDepartment")})]})]})})})})}export{$ as D,Z as a,O as b};
