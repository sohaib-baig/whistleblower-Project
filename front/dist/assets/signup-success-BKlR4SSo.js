import{u as p,a as j,r as a,j as e,C as n,b,T as s,B as u,I as o,A as v,c as m,i as w,s as P,e as C,p as I}from"./index-BJkBHIXD.js";import{C as y}from"./Card-CU8jzKuK.js";function E(){const f=p(),[c]=j(),[g,i]=a.useState(!0),[l,d]=a.useState(null),t=c.get("session_id"),r=c.get("order_id");a.useEffect(()=>{(async()=>{if(!t||!r){d("Missing session or order information"),i(!1);return}try{await w(),await P.post(C.orders.verifyPayment,{session_id:t,order_id:r}),i(!1)}catch(h){console.error("Payment verification failed:",h),d(h?.message||"Failed to verify payment"),i(!1)}})()},[t,r]);const x=()=>{f.push(I.auth.jwt.signIn)};return g?e.jsxs(n,{sx:{py:10,textAlign:"center"},children:[e.jsx(b,{size:60}),e.jsx(s,{variant:"h6",sx:{mt:3},children:"Verifying your payment..."}),e.jsx(s,{variant:"body2",sx:{mt:1,color:"text.secondary"},children:"Please wait while we confirm your payment with Stripe."})]}):l?e.jsx(n,{sx:{py:10},children:e.jsxs(y,{sx:{p:5,maxWidth:600,mx:"auto",textAlign:"center"},children:[e.jsx(u,{sx:{width:80,height:80,mx:"auto",mb:3,borderRadius:"50%",bgcolor:"error.lighter",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(o,{icon:"solar:close-circle-bold",width:48,sx:{color:"error.main"}})}),e.jsx(s,{variant:"h4",sx:{mb:2},children:"Verification Failed"}),e.jsx(v,{severity:"error",sx:{mb:3},children:l}),e.jsx(s,{variant:"body2",sx:{mb:4,color:"text.secondary"},children:"Please contact support if you believe this is an error."}),e.jsx(m,{variant:"contained",size:"large",onClick:x,children:"Go to Login"})]})}):e.jsx(n,{sx:{py:10},children:e.jsxs(y,{sx:{p:5,maxWidth:600,mx:"auto",textAlign:"center"},children:[e.jsx(u,{sx:{width:80,height:80,mx:"auto",mb:3,borderRadius:"50%",bgcolor:"success.lighter",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(o,{icon:"eva:checkmark-fill",width:48,sx:{color:"success.main"}})}),e.jsx(s,{variant:"h4",sx:{mb:2},children:"Payment Successful!"}),e.jsx(s,{variant:"body1",sx:{mb:1,color:"text.secondary"},children:"Thank you for subscribing to Wisling!"}),e.jsx(s,{variant:"body2",sx:{mb:4,color:"text.secondary"},children:"Your account has been created successfully. A confirmation email with your login credentials has been sent to your email address."}),r&&e.jsxs(s,{variant:"caption",sx:{display:"block",mb:4,color:"text.disabled"},children:["Order ID: ",r]}),e.jsx(m,{variant:"contained",size:"large",onClick:x,startIcon:e.jsx(o,{icon:"eva:arrow-forward-fill"}),children:"Go to Login"})]})})}export{E as default};
